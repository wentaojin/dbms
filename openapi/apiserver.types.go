// Package openapi provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/deepmap/oapi-codegen version v1.15.0 DO NOT EDIT.
package openapi

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// ColumnStructRule defines model for ColumnStructRule.
type ColumnStructRule struct {
	ColumnTypeS   *string `json:"columnTypeS,omitempty"`
	ColumnTypeT   *string `json:"columnTypeT,omitempty"`
	DefaultValueS *string `json:"defaultValueS,omitempty"`
	DefaultValueT *string `json:"defaultValueT,omitempty"`
	SourceColumn  *string `json:"sourceColumn,omitempty"`
	SourceSchema  *string `json:"sourceSchema,omitempty"`
	SourceTable   *string `json:"sourceTable,omitempty"`
}

// Database defines model for Database.
type Database struct {
	Host          *string `json:"host,omitempty"`
	Password      *string `json:"password,omitempty"`
	Port          *uint64 `json:"port,omitempty"`
	Schema        *string `json:"schema,omitempty"`
	SlowThreshold *uint64 `json:"slowThreshold,omitempty"`
	Username      *string `json:"username,omitempty"`
}

// Datasource defines model for Datasource.
type Datasource struct {
	Comment        *string `json:"comment,omitempty"`
	ConnectCharset *string `json:"connectCharset,omitempty"`
	ConnectParams  *string `json:"connectParams,omitempty"`
	ConnectStatus  *string `json:"connectStatus,omitempty"`
	DatasourceName *string `json:"datasourceName,omitempty"`
	DbType         *string `json:"dbType,omitempty"`
	Host           *string `json:"host,omitempty"`
	Password       *string `json:"password,omitempty"`
	PdbName        *string `json:"pdbName,omitempty"`
	Port           *uint64 `json:"port,omitempty"`
	ServiceName    *string `json:"serviceName,omitempty"`
	Username       *string `json:"username,omitempty"`
}

// NewDatasource defines model for NewDatasource.
type NewDatasource struct {
	Datasource *[]Datasource `json:"datasource,omitempty"`
}

// RequestDeleteParam defines model for RequestDeleteParam.
type RequestDeleteParam struct {
	Param *[]string `json:"param,omitempty"`
}

// RequestPostParam defines model for RequestPostParam.
type RequestPostParam struct {
	Page     *uint64 `json:"page,omitempty"`
	PageSize *uint64 `json:"pageSize,omitempty"`
	Param    *string `json:"param,omitempty"`
}

// Response defines model for Response.
type Response struct {
	Code  uint64 `json:"code"`
	Data  string `json:"data"`
	Error string `json:"error"`
}

// Rule defines model for Rule.
type Rule struct {
	Comment          *string            `json:"comment,omitempty"`
	DatasourceNameS  *string            `json:"datasourceNameS,omitempty"`
	DatasourceNameT  *string            `json:"datasourceNameT,omitempty"`
	SchemaRouteRules *[]SchemaRouteRule `json:"schemaRouteRules,omitempty"`
	TaskRuleName     *string            `json:"taskRuleName,omitempty"`
}

// SchemaRouteRule defines model for SchemaRouteRule.
type SchemaRouteRule struct {
	CaseFieldRule      *string           `json:"caseFieldRule,omitempty"`
	SourceExcludeTable *[]string         `json:"sourceExcludeTable,omitempty"`
	SourceIncludeTable *[]string         `json:"sourceIncludeTable,omitempty"`
	SourceSchema       *string           `json:"sourceSchema,omitempty"`
	TableRouteRules    *[]TableRouteRule `json:"tableRouteRules,omitempty"`
	TargetSchema       *string           `json:"targetSchema,omitempty"`
}

// SchemaStructRule defines model for SchemaStructRule.
type SchemaStructRule struct {
	ColumnTypeS   *string `json:"columnTypeS,omitempty"`
	ColumnTypeT   *string `json:"columnTypeT,omitempty"`
	DefaultValueS *string `json:"defaultValueS,omitempty"`
	DefaultValueT *string `json:"defaultValueT,omitempty"`
	SourceSchema  *string `json:"sourceSchema,omitempty"`
}

// StructMigrateParam defines model for StructMigrateParam.
type StructMigrateParam struct {
	CaseFieldRule    *string `json:"caseFieldRule,omitempty"`
	CreateIfNotExist *bool   `json:"createIfNotExist,omitempty"`
	DirectWrite      *bool   `json:"directWrite,omitempty"`
	MigrateThread    *uint64 `json:"migrateThread,omitempty"`
	OutputDir        *string `json:"outputDir,omitempty"`
	TaskQueueSize    *uint64 `json:"taskQueueSize,omitempty"`
}

// StructMigrateRule defines model for StructMigrateRule.
type StructMigrateRule struct {
	ColumnStructRules *[]ColumnStructRule `json:"columnStructRules,omitempty"`
	SchemaStructRules *[]SchemaStructRule `json:"schemaStructRules,omitempty"`
	TableAttrsRules   *[]TableAttrsRule   `json:"tableAttrsRules,omitempty"`
	TableStructRules  *[]TableStructRule  `json:"tableStructRules,omitempty"`
	TaskStructRules   *[]TaskStructRule   `json:"taskStructRules,omitempty"`
}

// StructMigrateTask defines model for StructMigrateTask.
type StructMigrateTask struct {
	StructMigrateParam *StructMigrateParam `json:"structMigrateParam,omitempty"`
	StructMigrateRule  *StructMigrateRule  `json:"structMigrateRule,omitempty"`
	TaskName           *string             `json:"taskName,omitempty"`
	TaskRuleName       *string             `json:"taskRuleName,omitempty"`
}

// TableAttrsRule defines model for TableAttrsRule.
type TableAttrsRule struct {
	SourceSchema *string   `json:"sourceSchema,omitempty"`
	SourceTables *[]string `json:"sourceTables,omitempty"`
	TableAttrsT  *string   `json:"tableAttrsT,omitempty"`
}

// TableRouteRule defines model for TableRouteRule.
type TableRouteRule struct {
	CaseFieldRule    *string            `json:"caseFieldRule,omitempty"`
	ColumnRouteRules *map[string]string `json:"columnRouteRules,omitempty"`
	SourceTable      *string            `json:"sourceTable,omitempty"`
	TargetTable      *string            `json:"targetTable,omitempty"`
}

// TableStructRule defines model for TableStructRule.
type TableStructRule struct {
	ColumnTypeS   *string `json:"columnTypeS,omitempty"`
	ColumnTypeT   *string `json:"columnTypeT,omitempty"`
	DefaultValueS *string `json:"defaultValueS,omitempty"`
	DefaultValueT *string `json:"defaultValueT,omitempty"`
	SourceSchema  *string `json:"sourceSchema,omitempty"`
	SourceTable   *string `json:"sourceTable,omitempty"`
}

// Task defines model for Task.
type Task struct {
	Express  *string `json:"express,omitempty"`
	Operate  *string `json:"operate,omitempty"`
	TaskName *string `json:"taskName,omitempty"`
}

// TaskStructRule defines model for TaskStructRule.
type TaskStructRule struct {
	ColumnTypeS   *string `json:"columnTypeS,omitempty"`
	ColumnTypeT   *string `json:"columnTypeT,omitempty"`
	DefaultValueS *string `json:"defaultValueS,omitempty"`
	DefaultValueT *string `json:"defaultValueT,omitempty"`
}

// APIPutDatabaseJSONRequestBody defines body for APIPutDatabase for application/json ContentType.
type APIPutDatabaseJSONRequestBody = Database

// APIDeleteDatasourceJSONRequestBody defines body for APIDeleteDatasource for application/json ContentType.
type APIDeleteDatasourceJSONRequestBody = RequestDeleteParam

// APIListDatasourceJSONRequestBody defines body for APIListDatasource for application/json ContentType.
type APIListDatasourceJSONRequestBody = RequestPostParam

// APIPutDatasourceJSONRequestBody defines body for APIPutDatasource for application/json ContentType.
type APIPutDatasourceJSONRequestBody = NewDatasource

// APIDeleteRuleJSONRequestBody defines body for APIDeleteRule for application/json ContentType.
type APIDeleteRuleJSONRequestBody = RequestDeleteParam

// APIListRuleJSONRequestBody defines body for APIListRule for application/json ContentType.
type APIListRuleJSONRequestBody = RequestPostParam

// APIPutRuleJSONRequestBody defines body for APIPutRule for application/json ContentType.
type APIPutRuleJSONRequestBody = Rule

// APIPostTaskJSONRequestBody defines body for APIPostTask for application/json ContentType.
type APIPostTaskJSONRequestBody = Task

// APIDeleteStructMigrateJSONRequestBody defines body for APIDeleteStructMigrate for application/json ContentType.
type APIDeleteStructMigrateJSONRequestBody = RequestDeleteParam

// APIListStructMigrateJSONRequestBody defines body for APIListStructMigrate for application/json ContentType.
type APIListStructMigrateJSONRequestBody = RequestPostParam

// APIPutStructMigrateJSONRequestBody defines body for APIPutStructMigrate for application/json ContentType.
type APIPutStructMigrateJSONRequestBody = StructMigrateTask

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
